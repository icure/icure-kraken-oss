
	<link rel="import" href="../../../bower_components/polymer/polymer.html">
	<link rel="import" href="../../../bower_components/iron-ajax/iron-ajax.html">

	<dom-module id="icc-icure-api">
		<template>
    		<style>
	    	</style>

				<iron-ajax id="declareError" method="POST" headers="[[headers]]" url="/icure/e" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="getIndexingInfo" method="GET" headers="[[headers]]" url="/icure/i" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="getProcessInfo" method="GET" headers="[[headers]]" url="/icure/p" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="getPropertyTypes" method="GET" headers="[[headers]]" url="/icure/propertytypes/{type}" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="getReplicationInfo" method="GET" headers="[[headers]]" url="/icure/r" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="getUsers" method="GET" headers="[[headers]]" url="/icure/u" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="getVersion" method="GET" headers="[[headers]]" url="/icure/v" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="isPatientReady" method="GET" headers="[[headers]]" url="/icure/pok" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="isReady" method="GET" headers="[[headers]]" url="/icure/ok" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="resolveContactsConflicts" method="POST" headers="[[headers]]" url="/icure/conflicts/contact" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="resolveFormsConflicts" method="POST" headers="[[headers]]" url="/icure/conflicts/form" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="resolveHealthElementsConflicts" method="POST" headers="[[headers]]" url="/icure/conflicts/healthelement" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="resolveInvoicesConflicts" method="POST" headers="[[headers]]" url="/icure/conflicts/invoice" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="resolveMessagesConflicts" method="POST" headers="[[headers]]" url="/icure/conflicts/message" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="resolvePatientsConflicts" method="POST" headers="[[headers]]" url="/icure/conflicts/patient" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="updateViews" method="POST" headers="[[headers]]" url="/icure/views" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
		</template>
	</dom-module>

	<script>
		(function () {
			Polymer({
				is: 'icc-icure-api',
				properties: {
					headers: {
						type: Object,
						value: {"Content-Type": "application/json"}
					},
					host: {
						type: String
					}
				},
				behaviors: [],
				declareError: function (body) {
					var xhr = this.$.declareError
					xhr.body = body
					xhr.url = this.host+"/icure/e" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				getIndexingInfo: function () {
					var xhr = this.$.getIndexingInfo

					xhr.url = this.host+"/icure/i" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				getProcessInfo: function () {
					var xhr = this.$.getProcessInfo

					xhr.url = this.host+"/icure/p" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				getPropertyTypes: function (type) {
					var xhr = this.$.getPropertyTypes

					xhr.url = this.host+"/icure/propertytypes/{type}".replace("{type}", type) + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				getReplicationInfo: function () {
					var xhr = this.$.getReplicationInfo

					xhr.url = this.host+"/icure/r" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				getUsers: function () {
					var xhr = this.$.getUsers

					xhr.url = this.host+"/icure/u" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				getVersion: function () {
					var xhr = this.$.getVersion

					xhr.url = this.host+"/icure/v" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				isPatientReady: function () {
					var xhr = this.$.isPatientReady

					xhr.url = this.host+"/icure/pok" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				isReady: function () {
					var xhr = this.$.isReady

					xhr.url = this.host+"/icure/ok" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				resolveContactsConflicts: function () {
					var xhr = this.$.resolveContactsConflicts

					xhr.url = this.host+"/icure/conflicts/contact" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				resolveFormsConflicts: function () {
					var xhr = this.$.resolveFormsConflicts

					xhr.url = this.host+"/icure/conflicts/form" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				resolveHealthElementsConflicts: function () {
					var xhr = this.$.resolveHealthElementsConflicts

					xhr.url = this.host+"/icure/conflicts/healthelement" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				resolveInvoicesConflicts: function () {
					var xhr = this.$.resolveInvoicesConflicts

					xhr.url = this.host+"/icure/conflicts/invoice" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				resolveMessagesConflicts: function () {
					var xhr = this.$.resolveMessagesConflicts

					xhr.url = this.host+"/icure/conflicts/message" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				resolvePatientsConflicts: function () {
					var xhr = this.$.resolvePatientsConflicts

					xhr.url = this.host+"/icure/conflicts/patient" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				updateViews: function () {
					var xhr = this.$.updateViews

					xhr.url = this.host+"/icure/views" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				handleError: function (e) {
					if (e.detail.request.status === 401) this.fire('auth-failed')
					else this.fire('api-error', e)
				}
			});
		})();
	</script>

@end
