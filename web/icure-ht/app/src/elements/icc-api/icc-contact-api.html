
	<link rel="import" href="../../../bower_components/polymer/polymer.html">
	<link rel="import" href="../../../bower_components/iron-ajax/iron-ajax.html">

	<dom-module id="icc-contact-api">
		<template>
    		<style>
	    	</style>

				<iron-ajax id="closeForHCPartyPatientSecretFKeys" method="PUT" headers="[[headers]]" url="/contact/byHcPartySecretForeignKeys/close" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="createContact" method="POST" headers="[[headers]]" url="/contact" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="deleteContacts" method="DELETE" headers="[[headers]]" url="/contact/{contactIds}" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="filterBy" method="POST" headers="[[headers]]" url="/contact/filter" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="filterServicesBy" method="POST" headers="[[headers]]" url="/contact/service/filter" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="findByHCPartyFormId" method="GET" headers="[[headers]]" url="/contact/byHcPartyFormId" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="findByHCPartyFormIds" method="POST" headers="[[headers]]" url="/contact/byHcPartyFormIds" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="findByHCPartyPatientSecretFKeys" method="GET" headers="[[headers]]" url="/contact/byHcPartySecretForeignKeys" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="getContact" method="GET" headers="[[headers]]" url="/contact/{contactId}" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="getContacts" method="POST" headers="[[headers]]" url="/contact/byIds" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="getEmptyContent" method="GET" headers="[[headers]]" url="/contact/service/content/empty" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="getServiceLabelsOccurences" method="GET" headers="[[headers]]" url="/contact/service/labels/{minOccurences}" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="matchBy" method="POST" headers="[[headers]]" url="/contact/match" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="modifyContact" method="PUT" headers="[[headers]]" url="/contact" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
				<iron-ajax id="newDelegations" method="POST" headers="[[headers]]" url="/contact/{contactId}/delegate" handle-as="json"
									 on-error="handleError" with-credentials></iron-ajax>
		</template>
	</dom-module>

	<script>
		(function () {
			Polymer({
				is: 'icc-contact-api',
				properties: {
					headers: {
						type: Object,
						value: {"Content-Type": "application/json"}
					},
					host: {
						type: String
					}
				},
				behaviors: [],
				closeForHCPartyPatientSecretFKeys: function (hcPartyId, secretFKeys) {
					var xhr = this.$.closeForHCPartyPatientSecretFKeys

					xhr.url = this.host+"/contact/byHcPartySecretForeignKeys/close" + "?ts=" + (new Date).getTime()  + (hcPartyId ? "&hcPartyId=" + hcPartyId : "") + (secretFKeys ? "&secretFKeys=" + secretFKeys : "")
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				createContact: function (body) {
					var xhr = this.$.createContact
					xhr.body = body
					xhr.url = this.host+"/contact" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				deleteContacts: function (contactIds) {
					var xhr = this.$.deleteContacts

					xhr.url = this.host+"/contact/{contactIds}".replace("{contactIds}", contactIds) + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				filterBy: function (startKey, startDocumentId, limit, body) {
					var xhr = this.$.filterBy
					xhr.body = body
					xhr.url = this.host+"/contact/filter" + "?ts=" + (new Date).getTime()  + (startKey ? "&startKey=" + startKey : "") + (startDocumentId ? "&startDocumentId=" + startDocumentId : "") + (limit ? "&limit=" + limit : "")
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				filterServicesBy: function (startKey, startDocumentId, limit, body) {
					var xhr = this.$.filterServicesBy
					xhr.body = body
					xhr.url = this.host+"/contact/service/filter" + "?ts=" + (new Date).getTime()  + (startKey ? "&startKey=" + startKey : "") + (startDocumentId ? "&startDocumentId=" + startDocumentId : "") + (limit ? "&limit=" + limit : "")
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				findByHCPartyFormId: function (hcPartyId, formId) {
					var xhr = this.$.findByHCPartyFormId

					xhr.url = this.host+"/contact/byHcPartyFormId" + "?ts=" + (new Date).getTime()  + (hcPartyId ? "&hcPartyId=" + hcPartyId : "") + (formId ? "&formId=" + formId : "")
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				findByHCPartyFormIds: function (hcPartyId, body) {
					var xhr = this.$.findByHCPartyFormIds
					xhr.body = body
					xhr.url = this.host+"/contact/byHcPartyFormIds" + "?ts=" + (new Date).getTime()  + (hcPartyId ? "&hcPartyId=" + hcPartyId : "")
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				findByHCPartyPatientSecretFKeys: function (hcPartyId, secretFKeys, planOfActionIds, skipClosedContacts) {
					var xhr = this.$.findByHCPartyPatientSecretFKeys

					xhr.url = this.host+"/contact/byHcPartySecretForeignKeys" + "?ts=" + (new Date).getTime()  + (hcPartyId ? "&hcPartyId=" + hcPartyId : "") + (secretFKeys ? "&secretFKeys=" + secretFKeys : "") + (planOfActionIds ? "&planOfActionIds=" + planOfActionIds : "") + (skipClosedContacts ? "&skipClosedContacts=" + skipClosedContacts : "")
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				getContact: function (contactId) {
					var xhr = this.$.getContact

					xhr.url = this.host+"/contact/{contactId}".replace("{contactId}", contactId) + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				getContacts: function (body) {
					var xhr = this.$.getContacts
					xhr.body = body
					xhr.url = this.host+"/contact/byIds" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				getEmptyContent: function () {
					var xhr = this.$.getEmptyContent

					xhr.url = this.host+"/contact/service/content/empty" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				getServiceLabelsOccurences: function (minOccurences) {
					var xhr = this.$.getServiceLabelsOccurences

					xhr.url = this.host+"/contact/service/labels/{minOccurences}".replace("{minOccurences}", minOccurences) + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				matchBy: function (body) {
					var xhr = this.$.matchBy
					xhr.body = body
					xhr.url = this.host+"/contact/match" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				modifyContact: function (body) {
					var xhr = this.$.modifyContact
					xhr.body = body
					xhr.url = this.host+"/contact" + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				newDelegations: function (contactId, body) {
					var xhr = this.$.newDelegations
					xhr.body = body
					xhr.url = this.host+"/contact/{contactId}/delegate".replace("{contactId}", contactId) + "?ts=" + (new Date).getTime()
					return xhr.generateRequest().completes.then(function (req) {
						return req.response
					})
				},
				handleError: function (e) {
					if (e.detail.request.status === 401) this.fire('auth-failed')
					else this.fire('api-error', e)
				}
			});
		})();
	</script>

@end
